var MPW;(()=>{var t,e,n,a,s={71220:(t,e,n)=>{var a={"./de/translation.js":[81052,52],"./en/translation.js":[34137,137],"./es-mx/translation.js":[75605,605],"./fr/translation.js":[35120,120],"./it/translation.js":[12473,473],"./ph/translation.js":[1563,563],"./pt-br/translation.js":[32216,216],"./pt-pt/translation.js":[74214,194],"./template/translation.js":[60270],"./uwu/translation.js":[22858,858]};function s(t){if(!n.o(a,t))return Promise.resolve().then((()=>{var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}));var e=a[t],s=e[0];return Promise.all(e.slice(1).map(n.e)).then((()=>n(s)))}s.keys=()=>Object.keys(a),s.id=71220,t.exports=s},95856:()=>{},48777:()=>{},46601:()=>{},89214:()=>{},52361:()=>{},94616:()=>{},60270:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>a});const a={amount:"",staking:"",wallet:"",display:"",activity:"",yes:"",no:"",navDashboard:"",navStake:"",navMasternode:"",navGovernance:"",navSettings:"",footerBuiltWithPivxLabs:"",loading:"",loadingTitle:"",dashboardTitle:"",dCardOneTitle:"",dCardOneSubTitle:"",dCardOneDesc:"",dCardOneButton:"",dCardTwoTitle:"",dCardTwoSubTitle:"",dCardTwoDesc:"",dCardTwoButton:"",dCardThreeTitle:"",dCardThreeSubTitle:"",dCardThreeDesc:"",dCardThreeButton:"",dCardFourTitle:"",dCardFourSubTitle:"",dCardFourDesc:"",dCardFourButtonI:"",dCardFourButtonA:"",vanityPrefixNote:"",vanityPrefixInput:"",thisIsYourSeed:"",writeDownSeed:"",doNotShareWarning:"",doNotShare:"",digitalStoreNotAdvised:"",optionalPassphrase:"",writtenDown:"",importSeedValid:"",importSeedError:"",importSeedErrorSize:"",importSeedErrorTypo:"",importSeedErrorSkip:"",gettingStarted:"",secureYourWallet:"",unlockWallet:"",lockWallet:"",encryptWallet:"",encryptPasswordCurrent:"",encryptPasswordFirst:"",encryptPasswordSecond:"",encrypt:"",changePassword:"",balanceBreakdown:"",viewOnExplorer:"",export:"",refreshAddress:"",redeemOrCreateCode:"",address:"",receivingAddress:"",sendAmountCoinsMax:"",paymentRequestMessage:"",send:"",receive:"",contacts:"",name:"",username:"",addressOrXPub:"",back:"",chooseAContact:"",createContact:"",encryptFirstForContacts:"",shareContactURL:"",setupYourContact:"",receiveWithContact:"",onlyShareContactPrivately:"",changeTo:"",contact:"",xpub:"",addContactTitle:"",addContactSubtext:"",addContactWarning:"",editContactTitle:"",newName:"",removeContactTitle:"",removeContactSubtext:"",removeContactNote:"",privateKey:"",viewPrivateKey:"",privateWarning1:"",privateWarning2:"",viewKey:"",pivxPromos:"",redeemInput:"",createName:"",createAmount:"",stake:"",stakeUnstake:"",ownerAddress:"",rewardHistory:"",loadMore:"",mnControlYour:"",mnSubtext:"",govSubtext:"",govMonthlyBudget:"",govAllocBudget:"",govNextPayout:"",govTableStatus:"",govTableName:"",govTablePayment:"",govTableVotes:"",govTableVote:"",contestedProposalsDesc:"",settingsCurrency:"",priceProvidedBy:"",settingsDecimals:"",settingsExplorer:"",settingsLanguage:"",settingsPivxNode:"",settingsAutoSelectNet:"",settingsAnalytics:"",settingsToggleDebug:"",settingsToggleTestnet:"",settingsToggleAdvancedMode:"",settingsToggleAdvancedModeSubtext:"",netSwitchUnsavedWarningTitle:"",netSwitchUnsavedWarningSubtitle:"",netSwitchUnsavedWarningSubtext:"",netSwitchUnsavedWarningConfirmation:"",transparencyReport:"",hit:"",time_to_sync:"",transaction:"",analyticDisabled:"",analyticMinimal:"",analyticBalanced:"",MIGRATION_ACCOUNT_FAILURE_TITLE:"",MIGRATION_ACCOUNT_FAILURE_HTML:"",ID:"",time:"",description:"",activityBlockReward:"",activitySentTo:"",activitySelf:"",activityShieldedAddress:"",activityReceivedFrom:"",activityDelegatedTo:"",activityUndelegated:"",activityUnknown:"",password:"",walletUnlock:"",walletPassword:"",walletUnlockCreateMN:"",walletUnlockMNStart:"",walletUnlockProposal:"",walletUnlockPromo:"",walletUnlockTx:"",walletUnlockStake:"",walletUnlockUnstake:"",changelogTitle:"",popupSetColdAddr:"",popupCurrentAddress:"",popupColdStakeNote:"",popupExample:"",popupWalletLock:"",popupWalletWipe:"",popupWalletLockNote:"",popupWalletWipeNote:"",popupSeedPhraseBad:"",popupSeedPhraseBadNote:"",popupCreateProposal:"",popupCreateProposalCost:"",popupProposalName:"",popupProposalAddress:"",popupProposalDuration:"",popupProposalPerCycle:"",popupProposalEncryptFirst:"",popupProposalVoteHash:"",popupProposalFinalisedNote:"",popupProposalFinalisedSignoff:"",popupHardwareAddrCheck:"",proposalFinalisationConfirming:"",proposalFinalisationRemaining:"",proposalFinalisationExpired:"",proposalFinalisationReady:"",proposalPassing:"",proposalFailing:"",proposalTooYoung:"",proposalFunded:"",proposalNotFunded:"",proposalPaymentsRemaining:"",proposalPaymentTotal:"",proposalNetYes:"",popupConfirm:"",popupClose:"",popupCancel:"",chartPublicAvailable:"",timeDays:"",timeHours:"",timeMinutes:"",timeSeconds:"",unhandledException:"",ALERTS:"<-- DO NOT EDIT THIS LINE! All below entries are for Alert Popups",INTERNAL_ERROR:"",FAILED_TO_IMPORT:"",FAILED_TO_IMPORT_HARDWARE:"",UNSUPPORTED_CHARACTER:"",UNSUPPORTED_WEBWORKERS:"",INVALID_ADDRESS:"",TESTNET_ENCRYPTION_DISABLED:"",PASSWORD_TOO_SMALL:"",PASSWORD_DOESNT_MATCH:"",NEW_PASSWORD_SUCCESS:"",INCORRECT_PASSWORD:"",INVALID_AMOUNT:"",TX_SENT:"",TX_FAILED:"",QR_SCANNER_BAD_RECEIVER:"",VALIDATE_AMOUNT_LOW:"",VALIDATE_AMOUNT_DECIMAL:"",SUCCESS_STAKING_ADDR:"",STAKE_ADDR_SET:"",STAKE_ADDR_BAD:"",CONFIRM_UNSTAKE_H_WALLET:"",CONFIRM_TRANSACTION_H_WALLET:"",SUCCESS_STAKING_ADDR_SET:"",STAKE_NOT_SEND:"",BAD_ADDR_LENGTH:"",BAD_ADDR_PREFIX:"",SENT_NOTHING:"",MORE_THEN_8_DECIMALS:"",SAVE_WALLET_PLEASE:"",BACKUP_OR_ENCRYPT_WALLET:"",NO_CAMERAS:"",STAKING_LEDGER_NO_SUPPORT:"",CONNECTION_FAILED:"",MN_NOT_ENABLED:"",VOTE_SUBMITTED:"",VOTED_ALREADY:"",VOTE_SIG_BAD:"",MN_CREATED_WAIT_CONFS:"",MN_ACCESS_BEFORE_VOTE:"",MN_OFFLINE_STARTING:"",MN_STARTED:"",MN_RESTARTED:"",MN_STARTED_ONLINE_SOON:"",MN_START_FAILED:"",MN_RESTART_FAILED:"",MN_DESTROYED:"",MN_STATUS_IS:"",MN_STATE:"",MN_BAD_IP:"",MN_BAD_PRIVKEY:"",MN_NOT_ENOUGH_COLLAT:"",MN_ENOUGH_BUT_NO_COLLAT:"",MN_COLLAT_NOT_SUITABLE:"",MN_CANT_CONNECT:"",CONTACTS_ENCRYPT_FIRST:"",CONTACTS_NAME_REQUIRED:"",CONTACTS_NAME_TOO_LONG:"",CONTACTS_CANNOT_ADD_YOURSELF:"",CONTACTS_ALREADY_EXISTS:"",CONTACTS_NAME_ALREADY_EXISTS:"",CONTACTS_EDIT_NAME_ALREADY_EXISTS:"",CONTACTS_KEY_ALREADY_EXISTS:"",CONTACTS_NOT_A_CONTACT_QR:"",CONTACTS_ADDED:"",CONTACTS_YOU_HAVE_NONE:"",SWITCHED_EXPLORERS:"",SWITCHED_NODE:"",SWITCHED_ANALYTICS:"",SWITCHED_SYNC:"",UNABLE_SWITCH_TESTNET:"",WALLET_OFFLINE_AUTOMATIC:"",WALLET_UNLOCK_IMPORT:"",WALLET_FIREFOX_UNSUPPORTED:"",WALLET_HARDWARE_WALLET:"",WALLET_CONFIRM_L:"",WALLET_NO_HARDWARE:"",WALLET_HARDWARE_CONNECTION_LOST:"",WALLET_HARDWARE_UDEV:"",WALLET_HARDWARE_NO_ACCESS:"",WALLET_HARDWARE_BUSY:"",WALLET_HARDWARE_ERROR:"",CONFIRM_POPUP_VOTE:"",CONFIRM_POPUP_VOTE_HTML:"",CONFIRM_POPUP_TRANSACTION:"",CONFIRM_POPUP_MN_P_KEY:"",CONFIRM_POPUP_MN_P_KEY_HTML:"",CONFIRM_POPUP_VERIFY_ADDR:"",MIGRATION_MASTERNODE_FAILURE:"",MIGRATION_ACCOUNT_FAILURE:"",APP_INSTALLED:""}},57119:(t,e,n)=>{"use strict";var a=n(17748),s=n(48764);function o(t){return s.Buffer.from(t,"hex")}function r(t){return s.Buffer.from(t).toString("hex")}function i(t){return(0,a.J)((0,a.J)(new Uint8Array(t)))}var c=n(27760),l=n(72697),d=n(2262);const u=10**8,p=(0,d.qj)({current:null,main:{name:"mainnet",collateralInSats:1e12,isTestnet:!1,TICKER:"PIV",PUBKEY_PREFIX:["D"],STAKING_PREFIX:"S",PUBKEY_ADDRESS:30,SECRET_KEY:212,BIP44_TYPE:119,BIP44_TYPE_LEDGER:77,PROTOCOL_VERSION:70926,MASTERNODE_PORT:51472,Explorers:[{name:"rockdev",url:"https://explorer.rockdev.org"},{name:"zkBitcoin",url:"https://zkbitcoin.com"},{name:"Duddino",url:"https://explorer.duddino.com"}],Nodes:[{name:"Duddino",url:"https://rpc.duddino.com/mainnet"}],Consensus:{UPGRADE_V6_0:void 0},budgetCycleBlocks:43200,proposalFee:5e9,proposalFeeConfirmRequirement:6,maxPaymentCycles:6,maxPayment:432e11,defaultColdStakingAddress:"SdgQDpS8jDRJDX8yK8m9KnTMarsE84zdsy"},testnet:{name:"testnet",collateralInSats:1e12,isTestnet:!0,TICKER:"tPIV",PUBKEY_PREFIX:["x","y"],STAKING_PREFIX:"W",PUBKEY_ADDRESS:139,SECRET_KEY:239,BIP44_TYPE:1,BIP44_TYPE_LEDGER:1,PROTOCOL_VERSION:70926,MASTERNODE_PORT:51474,Explorers:[{name:"rockdev",url:"https://testnet.rockdev.org"},{name:"duddino",url:"https://testnet.duddino.com"}],Nodes:[{name:"Duddino",url:"https://rpc.duddino.com/testnet"}],Consensus:{UPGRADE_V6_0:void 0},budgetCycleBlocks:144,proposalFee:5e9,proposalFeeConfirmRequirement:3,maxPaymentCycles:20,maxPayment:144e9,defaultColdStakingAddress:"WmNziUEPyhnUkiVdfsiNX93H6rSJnios44"}});p.current=p.main,n(60270);var h=n(26269);const y=new(n(17187).EventEmitter);function m(){return y}n(25108);var g=n(67804);n(2153),n(49840),n(34611),n(2099),n(27578),n(25108);new Map([[25870,"Open the PIVX app on your device"],[25873,"Open the PIVX app on your device"],[57408,"Navigate to the PIVX app on your device"],[27157,"Wrong app! Open the PIVX app on your device"],[27266,"Wrong app! Open the PIVX app on your device"],[27904,"Wrong app! Open the PIVX app on your device"],[27010,"Unlock your Ledger, then try again!"],[27404,"Unlock your Ledger, then try again!"]]);var f=n(25108);const w=new TextEncoder;new TextDecoder;const T=t=>window.crypto.subtle.importKey("raw",w.encode(t),"PBKDF2",!1,["deriveKey"]),E=(t,e,n)=>window.crypto.subtle.deriveKey({name:"PBKDF2",salt:e,iterations:25e4,hash:"SHA-256"},t,{name:"AES-GCM",length:256},!1,n);n(9424);class A{constructor(t){this.publicKey=t?.publicKey||"",this.encWif=t?.encWif||"",this.localProposals=t?.localProposals||[],this.contacts=t?.contacts||[],this.name=t?.name||"",this.coldAddress=t?.coldAddress||""}publicKey="";encWif="";localProposals=[];contacts=[];name="";coldAddress="";getContactBy({name:t,pubkey:e}){if(!t&&!e)throw Error("getContactBy(): At least ONE search parameter MUST be set!");return t?this.contacts.find((e=>e.label===t)):e?this.contacts.find((t=>t.pubkey===e)):null}}async function _(t,e=!1){let n="",a=0;if(e){n+='<div id="contactsList" class="contactsList">';for(const e of t.contacts||[]){const t=De(e.pubkey)?e.pubkey.slice(0,32)+"…":e.pubkey;n+=`\n            <div class="d-flex px-3 py-3 contactItem ptr" id="contactsSelector${a}">\n                <div id="contactsAvatarContainer${a}">\n                    <img id="contactsAvatar${a}" class="ptr" style="margin-right:20px; width: 50px; height: 50px; border-radius: 100%; background-color: white; border: 2px solid #d5adff;" ${e.icon?'src="'+e.icon+'"':""}>\n                </div>\n                <div id="contactsNameContainer${a}" style="width: 100%; line-height: 15px;">\n                    <span id="contactsName${a}" style="word-wrap: anywhere; color: #d5adff; font-weight: 600; margin-top: 8px; display: block;">${ke(ke(e.label))}</span>\n                    <span id="contactsAddress${a}" style="word-wrap: anywhere; font-size: 13px; position: relative; top: 3px;">${ke(t)}</span>\n                </div>\n            </div>\n            `,a++}n+=`\n            <span class="d-flex px-3 py-3 contactItem ptr" id="contactsSelector-1">\n                ${Se.back}\n            </span>\n        `,n+="</div>";const e=function(){return new Promise(((t,e)=>{setTimeout((()=>{function e(n){if(n.target.id.endsWith("-1"))return t("");const a=n.target.id.match(/([0-9]+)$/)[0],s=document.getElementById(`contactsName${a}`).innerText;t(s),function(){let t,n=-1;for(;t=document.getElementById(`contactsSelector${n}`);)t.removeEventListener("click",e),n++}()}let n,a=-1;for(;n=document.getElementById(`contactsSelector${a}`);)n.addEventListener("click",e,{once:!0}),a++}),500)}))};return await Ne({title:Se.chooseAContact,html:n,resolvePromise:e(),purpleModal:!0,textLeft:!0,noPadding:!0,maxHeight:450})}for(const e of t.contacts||[]){const t=De(e.pubkey)?e.pubkey.slice(0,32)+"…":e.pubkey;n+=`\n            <div class="d-flex px-3 py-3 contactItem">\n                <div>\n                    <img onclick="MPW.guiAddContactImage('${a}')" class="ptr" style="margin-right:20px; width: 50px; height: 50px; border-radius: 100%; background-color: white; border: 2px solid #d5adff;" ${e.icon?'src="'+e.icon+'"':""}>\n                </div>\n                <div style="width: 100%; line-height: 15px;">\n                    <span id="contactsName${a}" onclick="MPW.guiEditContactNamePrompt('${a}')" style="word-wrap: anywhere; cursor:pointer; color: #d5adff; font-weight: 600; margin-top: 8px; display: block;">${ke(e.label)}</span>\n                    <span id="contactsAddress${a}" style="word-wrap: anywhere; font-size: 13px; position: relative; top: 3px;">${ke(t)}</span>\n                </div>\n                <div style="display: flex; justify-content: flex-end; align-items: center; padding-right: 6px; padding-left: 15px;">\n                    <i style="cursor:pointer;" onclick="MPW.guiRemoveContact(${a})" class="far fa-trash-alt"></i>\n                </div>\n            </div>\n            `,a++}n+=`\n            <div class="d-flex px-3 addContact" style="margin-top:20px;">\n                <div class="contactName">\n                    <input id="contactsNameInput" class="m-0" placeholder="${Se.name}" autocomplete="nope">\n                </div>\n                <div class="contactAddr">\n                    <input id="contactsAddressInput" class="m-0" placeholder="${Se.addressOrXPub}" autocomplete="nope">\n                </div>\n                <div class="d-flex" style="align-items: center;">\n                    <div onclick="MPW.guiAddContact()" class="addContactBtn">\n                        <i class="fas fa-plus"></i>\n                    </div>\n                    <div onclick="MPW.guiAddContactQRPrompt()" class="qrContactBtn">\n                        <i class="fa-solid fa-qrcode"></i>\n                    </div>\n                </div>\n            </div>\n        `,Jt.domContactsTable.innerHTML=n}async function C(){const t=await Ce.getInstance(),e=await t.getAccount();return e&&e.contacts?_(e):Le("warning",be(ve.CONTACTS_ENCRYPT_FIRST,[{button:Se.secureYourWallet}]),3500)}async function v(t=b.CONTACT){if(t===b.CONTACT){const t=await Ce.getInstance(),e=await t.getAccount();if(e?.name){let t="";t=await D.getKeyToExport();const n=await async function(t,e){const n=await Ce.getInstance(),a=t||await n.getAccount();let o=e||"";o||(o=await D.getKeyToExport());const r=window.location.origin+window.location.pathname,i=s.Buffer.from(a.name).toString("hex");return`${r}?addcontact=${encodeURIComponent(i+":"+o)}`}(e,t);Jt.domModalQrLabel.innerHTML=`${Se.shareContactURL}<i onclick="MPW.localContactToClipboard(event)" id="guiAddressCopy" class="fas fa-clipboard" style="cursor: pointer; width: 20px;"></i>`,Jt.domModalQR.innerHTML=`\n                <p>${Se.onlyShareContactPrivately}</p>\n                <div id="receiveModalEmbeddedQR"></div>\n            `;const a=document.getElementById("receiveModalEmbeddedQR");Re(n,a,10),a.firstChild.style.width="100%",a.firstChild.style.height="auto",a.firstChild.classList.add("no-antialias"),document.getElementById("clipboard").value=t}else{const t=await D.getCurrentAddress();Jt.domModalQrLabel.innerHTML=t+`<i onclick="MPW.toClipboard('${t}', this)" id="guiAddressCopy" class="fas fa-clipboard" style="cursor: pointer; width: 20px;"></i>`,await k()?Jt.domModalQR.innerHTML=`\n                    <center>\n                        <b>${Se.setupYourContact}</b>\n                        <p>${Se.receiveWithContact}</p>\n                        <input id="setContactName" placeholder="${Se.username}" style="text-align: center;"></input>\n                        <button onclick="MPW.guiSetAccountName('setContactName')">${Se.createContact}</button>\n                    </center>\n                `:Jt.domModalQR.innerHTML=`\n                    <center>\n                        <b>${Se.secureYourWallet}</b>\n                        <p>${be(Se.encryptFirstForContacts,[{button:Se.secureYourWallet}])}</p>\n                    </center>\n                `}}else if(t===b.ADDRESS){const t=await D.getCurrentAddress();Re("pivx:"+t,Jt.domModalQR),Jt.domModalQrLabel.innerHTML=t+`<i onclick="MPW.toClipboard('${t}', this)" id="guiAddressCopy" class="fas fa-clipboard" style="cursor: pointer; width: 20px;"></i>`,Jt.domModalQR.firstChild.style.width="100%",Jt.domModalQR.firstChild.style.height="auto",Jt.domModalQR.firstChild.classList.add("no-antialias"),document.getElementById("clipboard").value=t}else{const t=await D.getXPub();Jt.domModalQrLabel.innerHTML=t+`<i onclick="MPW.toClipboard('${t}', this)" id="guiAddressCopy" class="fas fa-clipboard" style="cursor: pointer; width: 20px;"></i>`,Jt.domModalQR.innerHTML=`\n            <p>${Se.onlyShareContactPrivately}</p>\n            <div id="receiveModalEmbeddedQR"></div>\n        `;const e=document.getElementById("receiveModalEmbeddedQR");Re(t,e,10),e.firstChild.style.width="100%",e.firstChild.style.height="auto",e.firstChild.classList.add("no-antialias"),document.getElementById("clipboard").value=t}}async function S(){return async function(t=null){const e=D.isHD()?3:2;P=null!==t?t:(P+1)%e;let n="";switch((P+1)%e){case b.CONTACT:n=Se.contact;break;case b.ADDRESS:n=Se.address;break;case b.XPUB:n=Se.xpub}return Jt.domModalQrReceiveTypeBtn.innerText=Se.changeTo+" "+n,v(P),P}(P)}n(3006);const b={CONTACT:0,ADDRESS:1,XPUB:2};let P=b.CONTACT;function O(t,e){return t?.contacts?.find((t=>t.pubkey===e))?.label||e}var x=n(77191);const I={0:0,FALSE:0,PUSHDATA1:76,PUSHDATA2:77,PUSHDATA4:78,"1NEGATE":79,RESERVED:80,1:81,TRUE:81,2:82,3:83,4:84,5:85,6:86,7:87,8:88,9:89,10:90,11:91,12:92,13:93,14:94,15:95,16:96,NOP:97,VER:98,IF:99,NOTIF:100,VERIF:101,VERNOTIF:102,ELSE:103,ENDIF:104,VERIFY:105,RETURN:106,TOALTSTACK:107,FROMALTSTACK:108,"2DROP":109,"2DUP":110,"3DUP":111,"2OVER":112,"2ROT":113,"2SWAP":114,IFDUP:115,DEPTH:116,DROP:117,DUP:118,NIP:119,OVER:120,PICK:121,ROLL:122,ROT:123,SWAP:124,TUCK:125,CAT:126,SUBSTR:127,LEFT:128,RIGHT:129,SIZE:130,INVERT:131,AND:132,OR:133,XOR:134,EQUAL:135,EQUALVERIFY:136,RESERVED1:137,RESERVED2:138,"1ADD":139,"1SUB":140,"2MUL":141,"2DIV":142,NEGATE:143,ABS:144,NOT:145,"0NOTEQUAL":146,ADD:147,SUB:148,MUL:149,DIV:150,MOD:151,LSHIFT:152,RSHIFT:153,BOOLAND:154,BOOLOR:155,NUMEQUAL:156,NUMEQUALVERIFY:157,NUMNOTEQUAL:158,LESSTHAN:159,GREATERTHAN:160,LESSTHANOREQUAL:161,GREATERTHANOREQUAL:162,MIN:163,MAX:164,WITHIN:165,RIPEMD160:166,SHA1:167,SHA256:168,HASH160:169,HASH256:170,CODESEPARATOR:171,CHECKSIG:172,CHECKSIGVERIFY:173,CHECKMULTISIG:174,CHECKMULTISIGVERIFY:175,NOP1:176,NOP2:177,CHECKLOCKTIMEVERIFY:177,NOP3:178,NOP4:179,NOP5:180,NOP6:181,NOP7:182,NOP8:183,NOP9:184,NOP10:185,ZEROCOINMINT:193,ZEROCOINSPEND:194,ZEROCOINPUBLICSPEND:195,CHECKCOLDSTAKEVERIFY_LOF:209,CHECKCOLDSTAKEVERIFY:210,INVALIDOPCODE:255};function L(t){return t.length>=25&&t[0]==I.DUP&&t[1]==I.HASH160&&20==t[2]&&t[23]==I.EQUALVERIFY&&t[24]==I.CHECKSIG}function N(t){const e=Uint8Array.from(x.decode(t).slice(1,21));let n=[];return n.push(I.DUP),n.push(I.HASH160),n.push(20),n=n.concat(Array.prototype.slice.call(e)),n.push(I.EQUALVERIFY),n.push(I.CHECKSIG),r(n)}Object.freeze(I);var R=n(25108);n(19755);const D=new class{#t;#e;#n=0;#a=new Map;#s=new Map;#o;constructor(t,e){this.#e=t,this.#o=e}getMasterKey(){return this.#t}async getColdStakingAddress(){const t=await Ce.getInstance();return(await t.getAccount())?.coldAddress||p.current.defaultColdStakingAddress}get nAccount(){return this.#e}wipePrivateData(){this.#t.wipePrivateData(this.#e)}isViewOnly(){return!!this.#t&&this.#t.isViewOnly}isHD(){return!!this.#t&&this.#t.isHD}async hasWalletUnlocked(t=!1){return t&&!null.enabled?Le("warning",ve.WALLET_OFFLINE_AUTOMATIC,5500):!!this.isLoaded()||Le("warning",be(ve.WALLET_UNLOCK_IMPORT,[{unlock:await k()?"unlock ":"import/create"}]),3500)}async setMasterKey(t){this.#t=t,this.#o&&await null.setWallet(this)}getCurrentAddress(){return this.getAddress(0,this.#n)}getAddress(t=0,e=0){const n=this.getDerivationPath(t,e);return this.#t.getAddress(n)}getXPub(t=0,e=0){const n=this.getDerivationPath(t,e).split("/").slice(0,4).join("/");return this.#t.getxpub(n)}isLoaded(){return!!this.#t}async encryptWallet(t=""){let e=await async function(t,e=""){const n=e||window.prompt("Please enter your wallet encryption password");return!!n&&await async function(t,e){try{const n=window.crypto.getRandomValues(new Uint8Array(16)),a=window.crypto.getRandomValues(new Uint8Array(12)),s=await T(e),o=await E(s,n,["encrypt"]),r=await window.crypto.subtle.encrypt({name:"AES-GCM",iv:a},o,w.encode(t)),i=new Uint8Array(r);let c=new Uint8Array(n.byteLength+a.byteLength+i.byteLength);return c.set(n,0),c.set(a,n.byteLength),c.set(i,n.byteLength+a.byteLength),(t=>btoa(String.fromCharCode.apply(null,t)))(c)}catch(t){return f.log(`Error - ${t}`),""}}(t,n)}(this.#t.keyToBackup,t);if(!e)return!1;Jt.domGenKeyWarning.style.display="none";const n=new A({publicKey:this.getKeyToExport(),encWif:e}),a=await Ce.getInstance();await a.getAccount()?await a.updateAccount(n):await a.addAccount(n),removeEventListener("beforeunload",le,{capture:!0})}getNewAddress(){const t=null.lastWallet;this.#n=(this.#n>t?this.#n:t)+1,this.#n-t>20&&(this.#n=t);const e=this.getDerivationPath(0,this.#n);return[this.getAddress(0,this.#n),e]}isHardwareWallet(){return!0===this.#t?.isHardwareWallet}isOwnAddress(t){if(this.#a.has(t))return this.#a.get(t);const e=null.lastWallet;if(this.#n=this.#n>e?this.#n:e,!this.isHD()){const e=t===this.getKeyToExport()?":)":null;return this.#a.set(t,e),e}for(let e=0;e<=this.#n+20;e++){const n=this.getDerivationPath(0,e);if(t===this.#t.getAddress(n))return this.#a.set(t,n),n}return this.#a.set(t,null),null}getDerivationPath(t=0,e=0){return this.#t.getDerivationPath(this.#e,t,e)}getKeyToExport(){return this.#t?.getKeyToExport(this.#e)}getPath(t){const e=o(t),n=L(e)?3:28,a=this.getAddressFromPKHCache(r(e.slice(n,n+20)));return this.isOwnAddress(a)}isMyVout(t){let e;const n=o(t);if(L(n)){if(e=this.getAddressFromPKHCache(r(n.slice(3,23))),this.isOwnAddress(e))return V.SPENDABLE}else if(function(t){return t.length>=51&&t[0]==I.DUP&&t[1]==I.HASH160&&t[2]==I.ROT&&t[3]==I.IF&&(t[4]==I.CHECKCOLDSTAKEVERIFY||t[4]==I.CHECKCOLDSTAKEVERIFY_LOF)&&20==t[5]&&t[26]==I.ELSE&&20==t[27]&&t[48]==I.ENDIF&&t[49]==I.EQUALVERIFY&&t[50]==I.CHECKSIG}(n))for(let t=0;t<2;t++){const a=0==t?6:28;if(e=this.getAddressFromPKHCache(r(n.slice(a,a+20))),this.isOwnAddress(e))return 0==t?V.COLD_RECEIVED:V.SPENDABLE_COLD}return V.NOT_MINE}getAddressFromPKHCache(t){return this.#s.has(t)||this.#s.set(t,function(t){const e=new Uint8Array([p.current.PUBKEY_ADDRESS,...t]),n=i(e);return x.encode([...Array.from(e),...Array.from(n.slice(0,4))])}(o(t))),this.#s.get(t)}}(0,!0);async function k(){const t=await Ce.getInstance();return!!(await t.getAccount())?.encWif}async function M({updateGUI:t=!1,verify:e=!1}={}){const[n,a]=D.getNewAddress();if(e&&D.isHardwareWallet()){const t=await Ne({title:ve.CONFIRM_POPUP_VERIFY_ADDR,html:U(n),resolvePromise:D.getMasterKey().verifyAddress(a)});if(R.log(n,t),n!==t)throw new Error("User did not verify address")}return t&&S(),[n,a]}function U(t){return`${Se.popupHardwareAddrCheck} .\n              <div class="seed-phrase">${t}</div>`}var B=n(25108);class H{constructor({outpoint:t,script:e,value:n}={}){this.outpoint=t,this.script=e,this.value=n}}class K{constructor({outpoint:t,scriptSig:e}={}){this.outpoint=t,this.scriptSig=e}}class W{constructor({txid:t,blockHeight:e,vin:n,vout:a}={}){this.txid=t,this.blockHeight=e,this.vin=n,this.vout=a}isConfirmed(){return-1!=this.blockHeight}}class F{constructor({txid:t,n:e}={}){this.txid=t,this.n=e}}const V={NOT_MINE:0,SPENDABLE:1,SPENDABLE_COLD:2,COLD_RECEIVED:4,SPENDABLE_TOTAL:3};n(51409),n(25108);var $=n(25108);class j{cData={};strName="";strEndpoint="";async ensureCacheExists(){this.cData&&Object.keys(this.cData).length||await this.fetch()}async fetch(){try{return this.cData=await(await fetch(this.strEndpoint)).json()}catch(t){return $.warn("CoinGecko: Failed to fetch prices!"),$.warn(t),null}}}var Y=n(91555),X=n(49963),G=n(66252),z=n(3577);const Q={class:"dcWallet-activityLbl"},q={key:0},J={class:"dcWallet-activity"},Z={class:"scrollTable"},tt={class:"table table-responsive table-sm stakingTx table-mobile-scroll"},et={scope:"col",class:"tx1"},nt={scope:"col",class:"tx2"},at=(0,G._)("th",{scope:"col",class:"tx3"},"Amount",-1),st=(0,G._)("th",{scope:"col",class:"tx4 text-right"},null,-1),ot={class:"align-middle pr-10px",style:{"font-size":"12px"}},rt={style:{opacity:"0.75"}},it={class:"align-middle pr-10px txcode"},ct=["href"],lt={class:"wallet-code text-center active ptr",style:{padding:"4px 9px"}},dt={class:"align-middle pr-10px"},ut={style:{"font-family":"monospace"}},pt={class:"text-right pr-10px align-middle"},ht={key:0,class:"fas fa-check"},yt={key:1,class:"fas fa-hourglass-end"},mt={class:"buttoni-icon"},gt={class:"buttoni-text"},ft={__name:"Activity",props:{title:String,rewards:Boolean},setup(t,{expose:e}){const n=t,a=(0,d.iH)([]);let s=0;const o=(0,d.iH)(!1),r=(0,d.iH)(!1),i=(0,d.iH)("-"),c=(0,G.Fl)((()=>p.current.TICKER)),l=(0,G.Fl)((()=>null.strUrl)),u=(0,G.Fl)((()=>({1:{icon:"fa-gift",colour:"white",content:Se.activityBlockReward},5:{icon:"fa-minus",colour:"#f93c4c",content:Se.activitySentTo},4:{icon:"fa-plus",colour:"#5cff5c",content:Se.activityReceivedFrom},2:{icon:"fa-snowflake",colour:"white",content:Se.activityDelegatedTo},3:{icon:"fa-fire",colour:"white",content:Se.activityUndelegated},0:{icon:"fa-question",colour:"white",content:Se.activityUnknown}})));async function h(t=!1,e=!0){const c=null;if(!Zt.isLoaded)return;if(!c)return;if(o.value)return;let l;try{if(o.value=!0,l=s===c.arrTxHistory.length&&e?await c.syncTxHistoryChunk(t):c.arrTxHistory,!l||null!==c)return;s=l.length}finally{o.value=!1}if(r.value=c.isHistorySynced,n.rewards){const t=l.filter((t=>1===t.type));if(t.length!==a.length){const e=t.reduce(((t,e)=>t+e.amount),0);return i.value=`${c.isHistorySynced?"":"≥"}${e}`,void y(t)}}a.length!==l.length&&y(l)}async function y(t){const e=[],s={year:"2-digit",month:"2-digit",day:"2-digit"},o={hour:"2-digit",minute:"2-digit",hour12:!0};let r="",i=0;const c=await Ce.getInstance(),l=await c.getAccount();for(const a of t){const t=new Date(1e3*a.time);let c=Date.now()/1e3-a.time>86400?"":t.toLocaleTimeString(void 0,o);c||(r&&i-1e3*a.time<432e5||(r=t.toLocaleDateString(void 0,s)),c=r),i=1e3*a.time;const d=null.cachedBlockCount-a.blockHeight>=n.rewards?100:6;let p="";p=a.amount<.01?"<0.01":a.amount>=100?Math.round(a.amount).toString():a.amount.toFixed(2);let h=!1;if(5===a.type||4===a.type){h=!0;for(const t of a.receivers.concat(a.senders))await D.isOwnAddress(t)||(h=!1)}let{icon:y,colour:m,content:g}=u.value[a.type];const f=g.match(/{(.)}/);if(f){const t={r:"receivers",s:"senders"}[f[1]];let e="";if(h)e=Se.activitySelf;else if(a.shieldedOutputs)e=Se.activityShieldedAddress;else{const n=(await Promise.all(a[t].map((async t=>[await D.isOwnAddress(t),t])))).filter((([t,e])=>!t)).map((([t,e])=>O(l,e)));e=[...new Set(n.map((t=>t?.length>=32?t?.substring(0,6):t)))].join(", ")+"..."}g=g.replace(/{.}/,e)}e.push({date:c,id:a.id,content:n.rewards?a.id:g,formattedAmt:p,confirmed:d,icon:y,colour:m})}a.value=e}return(0,G.YP)(Se,(async()=>await h(!1,!1))),e({update:h,reset:function(){a.value=[],s=0,h(!1)},getTxCount:function(){return s}}),(e,n)=>((0,G.wg)(),(0,G.iD)(G.HY,null,[(0,G._)("center",null,[(0,G._)("span",Q,[(0,G.Uk)((0,z.zw)(t.title)+" ",1),t.rewards?((0,G.wg)(),(0,G.iD)("span",q," ("+(0,z.zw)(i.value)+" "+(0,z.zw)(c.value)+") ",1)):(0,G.kq)("v-if",!0)])]),(0,G._)("div",J,[(0,G._)("div",Z,[(0,G._)("div",null,[(0,G._)("table",tt,[(0,G._)("thead",null,[(0,G._)("tr",null,[(0,G._)("th",et,(0,z.zw)((0,d.SU)(Se).time),1),(0,G._)("th",nt,(0,z.zw)(t.rewards?(0,d.SU)(Se).ID:(0,d.SU)(Se).description),1),at,st])]),(0,G._)("tbody",null,[((0,G.wg)(!0),(0,G.iD)(G.HY,null,(0,G.Ko)(a.value,(t=>((0,G.wg)(),(0,G.iD)("tr",null,[(0,G._)("td",ot,[(0,G._)("i",rt,(0,z.zw)(t.date),1)]),(0,G._)("td",it,[(0,G._)("a",{href:l.value+"/tx/"+t.id,target:"_blank",rel:"noopener noreferrer"},[(0,G._)("code",lt,(0,z.zw)(t.content),1)],8,ct)]),(0,G._)("td",dt,[(0,G._)("b",ut,[(0,G._)("i",{class:(0,z.C_)(["fa-solid",[t.icon]]),style:(0,z.j5)([{"padding-right":"3px"},{color:t.colour}])},null,6),(0,G.Uk)(" "+(0,z.zw)(t.formattedAmt)+" "+(0,z.zw)(c.value),1)])]),(0,G._)("td",pt,[(0,G._)("span",{class:(0,z.C_)(["badge mb-0",{"badge-purple":t.confirmed,"bg-danger":!t.confirmed}])},[t.confirmed?((0,G.wg)(),(0,G.iD)("i",ht)):((0,G.wg)(),(0,G.iD)("i",yt))],2)])])))),256))])])]),(0,G._)("center",null,[r.value?(0,G.kq)("v-if",!0):((0,G.wg)(),(0,G.iD)("button",{key:0,class:"pivx-button-medium",onClick:n[0]||(n[0]=t=>h())},[(0,G._)("span",mt,[(0,G._)("i",{class:(0,z.C_)(["fas fa-sync fa-tiny-margin",{"fa-spin":o.value}])},null,2)]),(0,G._)("span",gt,(0,z.zw)((0,d.SU)(Se).loadMore),1)]))])])])],64))}};var wt=n(23148);wt.kL.register(wt.wL,wt.jI,wt.qi,wt.De,wt.u,wt.f$);let Tt=null;async function Et(){if("block"===!Jt.domModalWalletBreakdown.style.display)return;const t=await async function(){const t=[],e=Zt.balance;e>0&&t.push({type:Se.chartPublicAvailable,balance:e/u,colour:"rgba(127, 17, 224, 1)"});const n=Zt.coldBalance;n>0&&t.push({type:"Staking",balance:n/u,colour:"rgba(42, 27, 66, 1)"});const a=await(await Ce.getInstance()).getMasternode();if(a){const e=new F({txid:a.collateralTxId,n:a.outidx});Zt.hasUTXO(e,V.SPENDABLE,!0)&&t.push({type:"Masternode",balance:p.current.collateralInSats/u,colour:"rgba(19, 13, 30, 1)"})}return t}();if(!Tt)return await async function(t){const e=new Image;e.src=(await n.e(195).then(n.t.bind(n,52195,17))).default;const a={id:"centreLogo",beforeDraw:t=>{const n=t.ctx,{top:a,left:s,width:o,height:r}=t.chartArea,i=s+o/2-e.width/2,c=a+r/2-e.height/2;n.globalAlpha=.25,n.drawImage(e,i,c,e.width,e.height),n.globalAlpha=1}};Tt=new wt.kL(Jt.domWalletBreakdownCanvas,{type:"doughnut",data:{labels:t.map((t=>t.type)),datasets:[{label:p.current.TICKER,data:t.map((t=>t.balance))}]},plugins:[a],options:{backgroundColor:t.map((t=>t.colour)),radius:"75%",cutout:"75%",animation:{duration:500},plugins:{legend:{labels:{color:"#FFFFFF",font:{size:16}}}}}}),Tt.interval=setInterval(Et,2500)}(t);Tt.data.labels=t.map((t=>t.type)),Tt.data.datasets[0].data=t.map((t=>t.balance)),Tt.data.datasets[0].backgroundColor=t.map((t=>t.colour)),Tt.update()}const At={class:"dcWallet-balances mb-4"},_t={class:"row lessBot p-0"},Ct={class:"col-6 d-flex dcWallet-topLeftMenu",style:{"justify-content":"flex-start"}},vt={class:"noselect balance-title"},St={class:"col-6 d-flex dcWallet-topRightMenu",style:{"justify-content":"flex-end"}},bt={class:"btn-group dropleft"},Pt=(0,G._)("i",{class:"fa-solid fa-ellipsis-vertical",style:{width:"20px"},"data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},null,-1),Ot={class:"dropdown"},xt={class:"dropdown-move"},It={class:"dropdown-menu","aria-labelledby":"dropdownMenuButton"},Lt=(0,G._)("i",{class:"fa-solid fa-chart-pie"},null,-1),Nt=(0,G._)("i",{class:"fa-solid fa-magnifying-glass"},null,-1),Rt=(0,G._)("i",{class:"fa-solid fa-address-book"},null,-1),Dt=(0,G._)("i",{class:"fas fa-key"},null,-1),kt=(0,G._)("i",{class:"fas fa-sync-alt"},null,-1),Mt={class:"dropdown-item ptr","data-toggle":"modal","data-target":"#redeemCodeModal"},Ut=(0,G._)("i",{class:"fa-solid fa-gift"},null,-1),Bt=(0,G._)("canvas",{id:"identicon",class:"innerShadow",width:"65",height:"65",style:{width:"65px",height:"65px"},"data-jdenticon-value":""},null,-1),Ht=(0,G._)("br",null,null,-1),Kt=["innerHTML"],Wt={class:"dcWallet-pivxTicker"},Ft=(0,G._)("i",{class:"fa-solid fa-plus",style:{opacity:"0.5",position:"relative",left:"2px"}},null,-1),Vt=(0,G._)("br",null,null,-1),$t={class:"dcWallet-usdBalance"},jt={class:"dcWallet-usdValue"},Yt={class:"dcWallet-usdValue"},Xt={class:"row lessTop p-0"},Gt={class:"col-6 d-flex",style:{"justify-content":"flex-start"}},zt={class:"col-6 d-flex",style:{"justify-content":"flex-end"}},Qt={__name:"WalletBalance",setup(t){const e=(0,d.iH)(0),n=(0,d.iH)(0),a=(0,d.iH)(0),s=(0,d.iH)(!1),o=(0,d.iH)("USD"),r=(0,G.Fl)((()=>{const t=(e.value/u).toFixed(a.value);return Me(t,t.length>=10?"17px":"25px")})),i=(0,G.Fl)((()=>{const{nValue:t,cLocale:a}=se(e.value/u*n.value);return t.toLocaleString("en-gb",a)})),c=(0,G.Fl)((()=>p.current.TICKER));m().on("balance-update",(async()=>{e.value=Zt.balance,o.value=ue.toUpperCase(),n.value=await pe.getPrice(ue),a.value=me})),m().on("sync-status",(t=>{s.value="start"===t}));const l=(0,d.iH)(!1),h=(0,d.iH)(!1);return m().on("wallet-import",(()=>{l.value=D.isHD(),h.value=D.isHardwareWallet()})),(t,e)=>((0,G.wg)(),(0,G.iD)("center",null,[(0,G._)("div",At,[(0,G._)("div",_t,[(0,G._)("div",Ct,[(0,G._)("h3",vt,[(0,G._)("span",{class:"reload noselect",onClick:e[0]||(e[0]=t=>async function(){if(!s.value)try{s.value=!0,await async function(){const t=null;if(!t.enabled)return qt.warn("Offline mode active: For your security, the wallet will avoid ALL internet requests.");D.isLoaded()&&await t.getBlockCount()}()}finally{s.value=!1}}())},[(0,G._)("i",{class:(0,z.C_)(["fa-solid fa-rotate-right",{playAnim:s.value}])},null,2)])])]),(0,G._)("div",St,[(0,G._)("div",bt,[Pt,(0,G._)("div",Ot,[(0,G._)("div",xt,[(0,G._)("div",It,[(0,G._)("a",{class:"dropdown-item ptr",onClick:e[1]||(e[1]=t=>(0,d.SU)(Et)()),"data-toggle":"modal","data-target":"#walletBreakdownModal"},[Lt,(0,G._)("span",null," "+(0,z.zw)((0,d.SU)(Se).balanceBreakdown),1)]),(0,G._)("a",{class:"dropdown-item ptr",onClick:e[2]||(e[2]=t=>(0,d.SU)(re)())},[Nt,(0,G._)("span",null," "+(0,z.zw)((0,d.SU)(Se).viewOnExplorer),1)]),(0,G._)("a",{class:"dropdown-item ptr",onClick:e[3]||(e[3]=t=>(0,d.SU)(C)()),"data-toggle":"modal","data-target":"#contactsModal"},[Rt,(0,G._)("span",null," "+(0,z.zw)((0,d.SU)(Se).contacts),1)]),h.value?(0,G.kq)("v-if",!0):((0,G.wg)(),(0,G.iD)("a",{key:0,class:"dropdown-item ptr","data-toggle":"modal","data-target":"#exportPrivateKeysModal","data-backdrop":"static","data-keyboard":"false",onClick:e[4]||(e[4]=t=>(0,d.SU)(ce)())},[Dt,(0,G._)("span",null," "+(0,z.zw)((0,d.SU)(Se).export),1)])),l.value?((0,G.wg)(),(0,G.iD)("a",{key:1,class:"dropdown-item ptr","data-toggle":"modal","data-target":"#qrModal",onClick:e[5]||(e[5]=t=>(0,d.SU)(M)({updateGUI:!0,verify:!0}))},[kt,(0,G._)("span",null," "+(0,z.zw)((0,d.SU)(Se).refreshAddress),1)])):(0,G.kq)("v-if",!0),(0,G._)("a",Mt,[Ut,(0,G._)("span",null," "+(0,z.zw)((0,d.SU)(Se).redeemOrCreateCode),1)])])])])])])]),Bt,Ht,(0,G._)("span",{class:"ptr",onClick:e[6]||(e[6]=t=>(0,d.SU)(Et)()),"data-toggle":"modal","data-target":"#walletBreakdownModal"},[(0,G._)("span",{class:"dcWallet-pivxBalance",innerHTML:r.value},null,8,Kt),(0,G._)("span",Wt," "+(0,z.zw)(c.value)+" ",1),Ft]),Vt,(0,G._)("div",$t,[(0,G._)("span",jt,(0,z.zw)(i.value),1),(0,G._)("span",Yt," "+(0,z.zw)(o.value),1)]),(0,G._)("div",Xt,[(0,G._)("div",Gt,[(0,G._)("div",{class:"dcWallet-btn-left",onClick:e[7]||(e[7]=t=>(0,d.SU)(ie)("transferMenu","transferAnimation"))},(0,z.zw)((0,d.SU)(Se).send),1)]),(0,G._)("div",zt,[(0,G._)("div",{class:"dcWallet-btn-right",onClick:e[8]||(e[8]=t=>(0,d.SU)(S)()),"data-toggle":"modal","data-target":"#qrModal"},(0,z.zw)((0,d.SU)(Se).receive),1)])])])]))}};n(19755);var qt=n(25108);let Jt={};const Zt=new class{#r=!1;#i=0;#c=0;#l=-1;constructor(){this.spent=new g,this.txmap=new Map,this.subscribeToNetwork()}reset(){this.#r=!1,this.txmap=new Map,this.spent=new g}get balance(){return this.#i}get coldBalance(){return this.#c}get isLoaded(){return this.#r}subscribeToNetwork(){m().on("utxo",(async t=>{if(this.#r)B.error("ERROR! Event UTXO called on already loaded mempool");else{m().emit("sync-status","start");for(const e of t){if(this.#l=Math.max(this.#l,e.height),this.txmap.has(e.txid))continue;const n=await null.getTxFullInfo(e.txid);this.txmap.set(n.txid,this.parseTransaction(n));for(const e of n.vout){const a=new F({txid:n.txid,n:e.n});t.some((t=>t.txid==a.txid&&t.vout==a.n))||this.isSpent(a)||this.spent.set(n.txid,a)}}this.#r=!0,this.#i=this.getBalance(V.SPENDABLE),this.#c=this.getBalance(V.SPENDABLE_COLD),m().emit("balance-update"),oe(!0),te.update(),ee.update(),m().emit("sync-status","stop")}})),m().on("recent_txs",(async t=>{if(this.#r){m().emit("sync-status","start");for(const e of t)if(!(this.#l>=e.blockHeight||this.txmap.has(e.txid)&&this.txmap.get(e.txid).isConfirmed())){const t=this.parseTransaction(await null.getTxFullInfo(e.txid));await this.updateMempool(t)}m().emit("sync-status","stop")}}))}isSpent(t){return this.spent.get(t.txid)?.some((e=>e.n==t.n))}getBalance(t){let e=0;for(const[n,a]of this.txmap)for(const n of a.vout)this.isSpent(n.outpoint)||0!=(D.isMyVout(n.script)&t)&&(e+=n.value);return e}hasUTXO(t,e,n){if(this.isSpent(t))return!1;if(!this.txmap.has(t.txid))return!1;const a=this.txmap.get(t.txid);if(n&&!a.isConfirmed())return!1;const s=a.vout[t.n];return 0!=(D.isMyVout(s.script)&e)}getUTXOs({filter:t,target:e,onlyConfirmed:n=!1}){let a=0,s=[];for(const[o,r]of this.txmap)if(!n||r.isConfirmed())for(const n of r.vout)if(!this.isSpent(n.outpoint)&&0!=(D.isMyVout(n.script)&t)&&(s.push(n),a+=n.value,e&&a>1.1*e))return s;return s}parseTransaction(t){const e=[],n=[];for(const n of t.vout)e.push(new H({outpoint:new F({txid:t.txid,n:n.n}),script:n.scriptPubKey.hex,value:n.value*u}));for(const e of t.vin){const t=new F({txid:e.txid,n:e.vout});n.push(new K({outpoint:t,scriptSig:e.scriptSig.hex}))}return new W({txid:t.txid,blockHeight:null.cachedBlockCount-(t.confirmations-1)-t.confirmations,vin:n,vout:e})}updateMempool(t){this.txmap.set(t.txid,t);for(const e of t.vin){const t=e.outpoint;this.isSpent(t)||this.spent.set(t.txid,t)}this.#i=this.getBalance(V.SPENDABLE),this.#c=this.getBalance(V.SPENDABLE_COLD),m().emit("balance-update"),oe(!0)}},te=(0,X.ri)(ft,{title:"Activity",rewards:!1}).mount("#activityDashboard"),ee=(0,X.ri)(ft,{title:"Reward History",rewards:!0}).mount("#stakeActivity");(0,X.ri)(Qt).mount("#walletBalance");let ne=!1;function ae(){Jt.domGuiStakingValueCurrency.innerText=ue.toUpperCase(),Jt.domSendAmountValueCurrency.innerText=ue.toUpperCase(),Jt.domSendAmountCoinsTicker.innerText=p.current.TICKER,Jt.domStakeAmountValueCurrency.innerText=ue.toUpperCase(),Jt.domStakeAmountCoinsTicker.innerText=p.current.TICKER,Jt.domUnstakeAmountValueCurrency.innerText=ue.toUpperCase(),Jt.domUnstakeAmountCoinsTicker.innerText=p.current.TICKER}function se(t){let e=t;const n=Intl.supportedValuesOf("currency").includes(ue.toUpperCase())?{style:"currency",currency:ue,currencyDisplay:"narrowSymbol"}:{maximumFractionDigits:8,minimumFractionDigits:8};return"sats"===ue&&(e=Math.round(e),n.maximumFractionDigits=0,n.minimumFractionDigits=0),{nValue:e,cLocale:n}}function oe(t=!1){const e=Zt.coldBalance;if(t){const t=(e/u).toFixed(me),n=t.length;Jt.domGuiBalanceStaking.innerHTML=Me(t,n>=10?"17px":"25px"),Jt.domAvailToUndelegate.innerHTML=Me(t)+" "+p.current.TICKER,ae(),async function(t,e=!1){const n=await pe.getPrice(ue);if(n){const a=(e?oe():function(t=!1){const e=Zt.balance;if(t){const t=(e/u).toFixed(me);Jt.domAvailToDelegate.innerHTML=Me(t)+" "+p.current.TICKER,ae()}return e}())/u*n,{nValue:s,cLocale:o}=se(a);t.innerText=s.toLocaleString("en-gb",o)}}(Jt.domGuiStakingValue,!0)}return e}async function re(t=""){if(D.isLoaded()&&D.isHD()&&!t){const t=await D.getXPub();window.open(he.url+"/xpub/"+t,"_blank")}else{const e=t||await D.getAddress();window.open(he.url+"/address/"+e,"_blank")}}function ie(t,e){let n=document.getElementById(t);n.classList.contains(e)?(n.classList.remove(e),Jt.domBlackBack.classList.remove("d-none"),setTimeout((()=>{Jt.domBlackBack.classList.remove("blackBackHide")}),10)):(n.classList.add(e),Jt.domBlackBack.classList.add("blackBackHide"),setTimeout((()=>{Jt.domBlackBack.classList.add("d-none")}),150))}async function ce(){if(ne)Jt.domExportPrivateKey.innerHTML="",ne=!1;else if(await k()){const{encWif:t}=await(await Ce.getInstance()).getAccount();Jt.domExportPrivateKey.innerHTML=t,ne=!0}else D.isViewOnly()?ne=!1:(Jt.domExportPrivateKey.innerHTML=D.getMasterKey().keyToBackup,ne=!0)}p.current.isTestnet;const le=t=>(t.preventDefault(),Le("warning",ve.SAVE_WALLET_PLEASE,1e4),t.returnValue=Se.BACKUP_OR_ENCRYPT_WALLET);function de(t){const e=`${Se.unhandledException} <br> ${ke(t.message||t.reason)}`;try{Le("warning",e)}catch(t){alert(e)}}try{window.addEventListener("error",de),window.addEventListener("unhandledrejection",de)}catch(t){}let ue="usd",pe=new class extends j{constructor(){super(),this.strName="CoinGecko",this.strEndpoint="https://api.coingecko.com/api/v3/coins/pivx?localization=false&tickers=false&market_data=true&community_data=false&developer_data=false&sparkline=false"}async getPrice(t){return await this.ensureCacheExists(),this.cData?.market_data?.current_price[t]||0}async getCurrencies(){return await this.ensureCacheExists(),Be(this.cData)?[]:Object.keys(this.cData.market_data.current_price)}},he=p.current.Explorers[0],ye=p.current.Nodes[0],me=2;class ge{analytics;explorer;node;autoswitch;coldAddress;translation;displayCurrency;displayDecimals;advancedMode;constructor({analytics:t,explorer:e,node:n,autoswitch:a=!0,translation:s="",displayCurrency:o="usd",displayDecimals:r=me,advancedMode:i=!1,coldAddress:c=""}={}){this.analytics=t,this.explorer=e,this.node=n,this.autoswitch=a,this.translation=s,this.displayCurrency=o,this.displayDecimals=r,this.advancedMode=i,this.coldAddress=c}}let fe={hit:"A ping indicating an app load, no unique data is sent.",time_to_sync:"The time in seconds it took for MPW to last synchronise.",transaction:"A ping indicating a Tx, no unique data is sent, but may be inferred from on-chain time."};Object.keys(fe);var we=n(60743),Te=n(25108);class Ee{constructor({walletPrivateKeyPath:t,mnPrivateKey:e,collateralTxId:n,outidx:a,addr:s}={}){this.walletPrivateKeyPath=t,this.mnPrivateKey=e,this.collateralTxId=n,this.outidx=a,this.addr=s}static sessionVotes=[];async _getWalletPrivateKey(){return await D.getMasterKey().getPrivateKey(this.walletPrivateKeyPath)}async getFullData(){const t=`${ye.url}/listmasternodes?params=${this.collateralTxId}`;try{const e=(await(await fetch(t)).json()).filter((t=>t.outidx===this.outidx));return e.length>0?e[0]:{status:"MISSING"}}catch(t){return Te.error(t),"EXPLORER_DOWN"}}async getStatus(){const t=await this.getFullData();return t?t.status:"MISSING"}static _decodeIpAddress(t,e){let n;if(t.endsWith(".onion")){const e=we.decode(t.slice(0,-6)).split("").map((t=>t.charCodeAt(0)));switch(e.length){case 10:n=[253,135,216,126,235,67,...e];break;case 35:n=[4,32,...e.slice(0,32)];break;default:throw new Error("Invalid onion address")}}else n=(t.includes(".")?Y.S5.fromAddress4(t):new Y.S5(t)).toUnsignedByteArray();return r([...new Array(Math.max(16-n.length,0)).fill(0),...n])+r(Ee._numToBytes(e,2,!1))}static _numToBytes(t,e=8,n=!0){const a=[];for(let n=0;n<e;n++)a.push(t/2**(8*n)&255);return n?a:a.reverse()}static getPingSignature({vin:t,blockHash:e,sigTime:n}){return i([...o(t.txid).reverse(),...Ee._numToBytes(t.idx,4,!0),0,255,255,255,255,...o(e).reverse(),...Ee._numToBytes(n,8,!0)])}static getToSign({publicKey:t,addr:e,mnPrivateKey:n,sigTime:a}){let s,c;e.includes(".")?[s,c]=e.split(":"):([s,c]=e.slice(1).split("]"),c=c.slice(1));const l=o(He({pkBytes:Ke(n,!0),output:"UNCOMPRESSED_HEX"}));return r(i([...Ee._numToBytes(1,4,!0),...o(Ee._decodeIpAddress(s,c)),...Ee._numToBytes(a,8,!0),...Ee._numToBytes(t.length,1,!0),...t,...Ee._numToBytes(l.length,1,!0),...l,...Ee._numToBytes(p.current.PROTOCOL_VERSION,4,!0)]).reverse())}static async getLastBlockHash(){return(await(await fetch(`${he.url}/api/`)).json()).backend.bestBlockHash}async getSignedMessage(t){const e=Ee.getToSign({addr:this.addr,publicKey:await this.getWalletPublicKey(),mnPrivateKey:this.mnPrivateKey,sigTime:t});if(D.isHardwareWallet()){const{r:t,s:n,v:a}=await null.signMessage(this.walletPrivateKeyPath,r(e));return[a+31,...o(t),...o(n)]}{const t="DarkNet Signed Message:\n".split("").map((t=>t.charCodeAt(0))),n=await this._getWalletPrivateKey(),a=e.split("").map((t=>t.charCodeAt(0))),s=i(t.concat(a.length).concat(a)),[o,r]=await c.Xx(s,Ke(n,!0),{der:!1,recovered:!0});return[r+31,...o]}}async getSignedPingMessage(t,e){const n=Ee.getPingSignature({vin:{txid:this.collateralTxId,idx:this.outidx},blockHash:e,sigTime:t}),[a,s]=await c.Xx(n,Ke(this.mnPrivateKey,!0),{der:!1,recovered:!0});return[s+27,...a]}async getWalletPublicKey(){return D.isHardwareWallet()?o(await D.getMasterKey().getPublicKey(this.walletPrivateKeyPath)):o(He({pkBytes:Ke(await this._getWalletPrivateKey(),!0),output:"COMPRESSED_HEX"}))}async broadcastMessageToHex(){const t=Math.round(Date.now()/1e3),e=await Ee.getLastBlockHash();let n,a;this.addr.includes(".")?[n,a]=this.addr.split(":"):([n,a]=this.addr.slice(1).split("]"),a=a.slice(1));const s=await this.getWalletPublicKey(),i=o(He({pkBytes:Ke(this.mnPrivateKey,!0),output:"UNCOMPRESSED_HEX",compress:!1})),c=await this.getSignedMessage(t),l=await this.getSignedPingMessage(t,e);return r([...o(this.collateralTxId).reverse(),...Ee._numToBytes(this.outidx,4,!0),...Ee._numToBytes(0,1,!0),...Ee._numToBytes(4294967295,4,!0),...o(Ee._decodeIpAddress(n,a)),...Ee._numToBytes(s.length,1,!0),...s,...Ee._numToBytes(i.length,1,!0),...i,...Ee._numToBytes(c.length,1,!0),...c,...Ee._numToBytes(t,8,!0),...Ee._numToBytes(p.current.PROTOCOL_VERSION,4,!0),...o(this.collateralTxId).reverse(),...Ee._numToBytes(this.outidx,4,!0),...Ee._numToBytes(0,1,!0),...Ee._numToBytes(4294967295,4,!0),...o(e).reverse(),...Ee._numToBytes(t,8,!0),...Ee._numToBytes(l.length,1,!0),...l,...Ee._numToBytes(1,4,!0),...Ee._numToBytes(1,4,!0)])}async start(){const t=await this.broadcastMessageToHex(),e=`${ye.url}/relaymasternodebroadcast?params=${t}`;return(await(await fetch(e)).text()).includes("Masternode broadcast sent")}static async getProposals({fAllowFinished:t=!1}={}){const e=`${ye.url}/getbudgetinfo`;let n=await(await fetch(e)).json();return t||(n=n.filter((t=>t.RemainingPaymentCount>0))),n}async getSignedVoteMessage(t,e,n){const a=[...o(this.collateralTxId).reverse(),...Ee._numToBytes(this.outidx,4,!0),0,255,255,255,255,...o(t).reverse(),...Ee._numToBytes(e,4,!0),...Ee._numToBytes(n,8,!0)],[r,l]=await c.Xx(i(a),Ke(this.mnPrivateKey,!0),{der:!1,recovered:!0});return s.Buffer.from([l+27,...r]).toString("base64")}async getVote(t,e){const n=Ee.sessionVotes.findIndex((([t])=>t===e));if(-1!==n)return Ee.sessionVotes[n][1];const a=`${encodeURI('.[] | select(.mnId=="')}${this.collateralTxId}-${this.outidx}")`,s=`${ye.url}/getbudgetvotes?params=${t}&filter=${a}`;try{const{Vote:t}=await(await fetch(s)).json();return"YES"===t?1:2}catch(t){return null}}storeVote(t,e){const n=[t,e],a=Ee.sessionVotes.findIndex((([e])=>e===t));-1!==a?Ee.sessionVotes[a]=n:Ee.sessionVotes.push(n)}async vote(t,e){const n=Math.round(Date.now()/1e3),a=await this.getSignedVoteMessage(t,e,n),s=`${ye.url}/mnbudgetrawvote?params=${this.collateralTxId},${this.outidx},${t},${1===e?"yes":"no"},${n},${encodeURI(a).replaceAll("+","%2b")}`;return await(await fetch(s)).text()}static createProposalHash({name:t,url:e,nPayments:n,start:a,address:s,monthlyPayment:o}){const c=a+(p.current.budgetCycleBlocks+1)*n,l=x.decode(s),d=[I.DUP,I.HASH160,l.length-5,...l.slice(1,l.length-4),I.EQUALVERIFY,I.CHECKSIG],u=[t.length,...t.split("").map((t=>t.charCodeAt(0))),e.length,...e.split("").map((t=>t.charCodeAt(0))),...Ee._numToBytes(a,4,!0),...Ee._numToBytes(c,4,!0),...Ee._numToBytes(o,8,!0),d.length,...d];return r(i(new Uint8Array(u)))}static async finalizeProposal({name:t,url:e,nPayments:n,start:a,address:s,monthlyPayment:o,txid:r}){try{const i=await(await fetch(`${ye.url}/submitbudget?params=${encodeURI(t)},${encodeURI(e)},${n},${a},${encodeURI(s)},${o/u},${r}`)).text();return 66==i.length?{ok:!0,hash:i}:i.includes("is unconfirmed")||i.includes("requires at least")?{ok:!1,err:"unconfirmed"}:i.includes("invalid budget proposal")||i.includes("Invalid block start")?{ok:!1,err:"invalid"}:{ok:!1,err:"other"}}catch(t){return Te.error(t),{ok:!1,err:t}}}static async getNextSuperblock(){return parseInt(await(await fetch(`${ye.url}/getnextsuperblock`)).text())}static async getMasternodeCount(){return await(await fetch(`${ye.url}/getmasternodecount`)).json()}static isValidProposal({name:t,url:e,nPayments:n,_start:a,address:s,monthlyPayment:o}){const r=/^[a-z0-9 .,;\-_/:?@()]+$/i;return t.length>20?{ok:!1,err:"name_length"}:r.test(t)?e.length>64?{ok:!1,err:"url_length"}:r.test(e)&&/^(https?):\/\/[^\s/$.?#][^\s]*[^\s/.]\.[^\s/.][^\s]*[^\s.]$/.test(e)?n<1||n>p.current.maxPaymentCycles?{ok:!1,err:"invalid_payment_count"}:o<1e9||o*n>p.current.maxPayment?{ok:!1,err:"invalid_monthly_payment"}:34===(i=s).length&&p.current.PUBKEY_PREFIX.includes(i[0])?{ok:!0}:{ok:!1,err:"invalid_address"}:{ok:!1,err:"invalid_url"}:{ok:!1,err:"invalid_name"};var i}}n(19755);class Ae{constructor({code:t,address:e,pkBytes:n,utxos:a,time:s}){this.code=t,this.address=e,this.pkBytes=n,this.utxos=a,this.time=s instanceof Date?s:new Date(s)}fSynced=!1;fLock=!1;async getBalance(t=!1){return t||await this.getUTXOs(),this.utxos.reduce(((t,e)=>t+e.sats),0)}async getUTXOs(t=!1){if(!t&&this.fLock)return this.utxos;this.fLock=!0,this.address||(this.address=He({pkBytes:this.pkBytes}));const e=await null.getUTXOs(this.address);this.utxos=[];for(const t of e)this.utxos.push({id:t.txid,sats:parseInt(t.value),vout:t.vout,script:N(this.address)});return this.fLock=!1,this.fSynced=!0,this.utxos}}var _e=n(25108);class Ce{static version=1;#d;constructor({db:t}){this.#d=t}close(){this.#d.close(),this.#d=null}async addMasternode(t,e){const n=this.#d.transaction("masternodes","readwrite").objectStore("masternodes");await n.put(t,"masternode")}async removeMasternode(t){const e=this.#d.transaction("masternodes","readwrite").objectStore("masternodes");await e.delete("masternode")}async addPromo(t){const e=this.#d.transaction("promos","readwrite").objectStore("promos");await e.put(t,t.code)}async removePromo(t){const e=this.#d.transaction("promos","readwrite").objectStore("promos");await e.delete(t)}async addAccount(t){if(!(t instanceof A))return _e.error("---- addAccount() called with invalid input, input dump below ----"),_e.error(t),_e.error("---- end of account dump ----"),Le("warning","<b>Account Creation Error</b><br>Logs were dumped in your Browser Console<br>Please submit these privately to PIVX Labs Developers!"),!1;const e=new A;for(const n of Object.keys(e))Ue(t[n],e[n])?e[n]=t[n]:_e.error('DB: addAccount() key "'+n+'" does NOT match the correct class type, likely data mismatch, please report!');const n=this.#d.transaction("accounts","readwrite").objectStore("accounts");if(await n.get("account"))return _e.error("DB: Ran addAccount() when account already exists!");await n.put(e,"account")}async updateAccount(t,e=!1){if(!(t instanceof A))return _e.error("---- updateAccount() called with invalid input, input dump below ----"),_e.error(t),_e.error("---- end of account dump ----"),Le("warning","<b>DB Update Error</b><br>Your wallet is safe, logs were dumped in your Browser Console<br>Please submit these privately to PIVX Labs Developers!"),!1;const n=await this.getAccount();if(!n)return _e.error("---- updateAccount() called without an account existing, input dump below ----"),_e.error(t),_e.error("---- end of input dump ----"),Le("warning","<b>DB Update Error</b><br>Logs were dumped in your Browser Console<br>Please submit these privately to PIVX Labs Developers!"),!1;for(const a of Object.keys(n))Ue(t[a],n[a])?!e&&Be(t[a])||(n[a]=t[a]):_e.error('DB: updateAccount() key "'+a+'" does NOT match the correct class type, likely data mismatch, please report!');const a=this.#d.transaction("accounts","readwrite").objectStore("accounts");await a.put(n,"account")}async removeAccount({publicKey:t}){const e=this.#d.transaction("accounts","readwrite").objectStore("accounts");await e.delete("account")}async getAccount(){const t=this.#d.transaction("accounts","readonly").objectStore("accounts"),e=await t.get("account");if(!e)return null;const n=new A;for(const t of Object.keys(n))Object.prototype.hasOwnProperty.call(e,t)&&(Ue(e[t],n[t])?n[t]=e[t]:_e.error('DB: getAccount() key "'+t+'" does NOT match the correct class type, likely bad data saved, please report!'));return n}async getMasternode(t){const e=this.#d.transaction("masternodes","readonly").objectStore("masternodes");return new Ee(await e.get("masternode"))}async getAllPromos(){const t=this.#d.transaction("promos","readonly").objectStore("promos");return(await t.getAll()).map((t=>new Ae(t)))}async getSettings(){const t=this.#d.transaction("settings","readonly").objectStore("settings");return new ge(await t.get("settings"))}async setSettings(t){const e=await this.getSettings(),n=this.#d.transaction("settings","readwrite").objectStore("settings");await n.put({...e,...t},"settings")}async#u(){if(0===localStorage.length)return;const t=new ge({analytics:localStorage.analytics,explorer:localStorage.explorer,node:localStorage.node,translation:localStorage.translation,displayCurrency:localStorage.displayCurrency});if(await this.setSettings(t),localStorage.masternode)try{const t=JSON.parse(localStorage.masternode);await this.addMasternode(t)}catch(t){_e.error(t),Le("warning",ve.MIGRATION_MASTERNODE_FAILURE)}if(localStorage.encwif||localStorage.publicKey)try{const t=JSON.parse(localStorage.localProposals||"[]"),e=new A({publicKey:localStorage.publicKey,encWif:localStorage.encwif,localProposals:t});await this.addAccount(e)}catch(t){_e.error(t),Le("warning",ve.MIGRATION_ACCOUNT_FAILURE),localStorage.encwif&&await Ne({title:Se.MIGRATION_ACCOUNT_FAILURE_TITLE,html:`${Se.MIGRATION_ACCOUNT_FAILURE_HTML} <code id="exportPrivateKeyText">${ke(localStorage.encwif)} </code>`})}}static async create(t){let e=!1;const n=new Ce({db:null}),a=await(0,h.X3)(`MPW-${t}`,2,{upgrade:(t,n)=>{_e.log("DB: Upgrading from "+n+" to 2"),0==n&&(t.createObjectStore("masternodes"),t.createObjectStore("accounts"),t.createObjectStore("settings"),e=!0),n<=1&&t.createObjectStore("promos")},blocking:()=>{n.close(),alert("New update received!"),window.location.reload()}});return n.#d=a,e&&n.#u(),n}static#p=new Map;static async getInstance(){const t=p.current.name,e=this.#p.get(t);return e&&e.#d||this.#p.set(t,await Ce.create(t)),this.#p.get(t)}}n(25108);const ve={},Se=(0,d.qj)({});function be(t,e){return e.forEach((e=>{t=t.replaceAll("{"+Object.keys(e)[0]+"}",Object.values(e)[0])})),t}var Pe=n(96192),Oe=(n(27715),n(19755));function xe(t=32){return crypto.getRandomValues(new Uint8Array(t))}function Ie(t,e,n){const a=t.length;if(a-n-e.length<0){const t="CRITICAL: Overflow detected ("+(a-n-e.length)+"), possible state corruption, backup and refresh advised.";throw Le("warning",t,5e3),Error(t)}let s=0;for(;n<a;)t[n++]=e[s++]}function Le(t,e,n=0){const a=document.createElement("div");let s;switch(a.classList.add("notifyWrapper"),a.classList.add(t),setTimeout((()=>{a.style.opacity="1",a.style.zIndex="999999",a.classList.add("bounce-ani"),a.classList.add("bounce")}),100),t){case"warning":s="fa-exclamation";break;case"info":s="fa-info";break;default:s="fa-check"}a.innerHTML=`\n    <div class="notifyIcon notify-${t}">\n        <i class="fas ${s} fa-xl"></i>\n    </div>\n    <div class="notifyText">\n        ${e}\n    </div>`,a.destroy=()=>{clearTimeout(a.timer),a.style.opacity="0",setTimeout((()=>{a.remove()}),600)},a.addEventListener("click",a.destroy),n>0&&(a.timer=setTimeout(a.destroy,n)),Jt.domAlertPos.appendChild(a)}async function Ne({title:t,html:e,resolvePromise:n,hideConfirm:a,purpleModal:s,textLeft:o,noPadding:r,maxHeight:i}){Jt.domConfirmModalHeader.style.display=t?"block":"none",Jt.domConfirmModalTitle.innerHTML=t||"",Jt.domConfirmModalButtons.style.setProperty("display",n?"none":"block",n?"important":void 0),Oe("#confirmModal").modal(n?"show":{keyboard:!1}),Jt.domConfirmModalConfirmButton.style.display=a?"none":"",Jt.domConfirmModalCancelButton.innerText=a?Se.popupClose:Se.popupCancel,Jt.domConfirmModalContent.innerHTML=e,o?Jt.domConfirmModalContent.classList.remove("center-text"):Jt.domConfirmModalContent.classList.add("center-text"),s?Jt.domConfirmModalMain.classList.add("exportKeysModalColor"):Jt.domConfirmModalMain.classList.remove("exportKeysModalColor"),r?(Jt.domConfirmModalContent.classList.add("px-0"),Jt.domConfirmModalContent.classList.add("pb-0")):(Jt.domConfirmModalContent.classList.remove("px-0"),Jt.domConfirmModalContent.classList.remove("pb-0")),i&&Jt.domConfirmModalDialog.classList.add(`max-w-${i}`);for(const t of Jt.domConfirmModalContent.children)if("text"===t.type||"password"===t.type){t.focus();break}n=n||new Promise(((t,e)=>{Jt.domConfirmModalConfirmButton.onclick=()=>{t(!0)},Jt.domConfirmModalCancelButton.onclick=()=>{t(!1)}}));try{return await n}finally{Oe("#confirmModal").modal("hide"),Jt.domConfirmModalDialog.classList.remove(`max-w-${i}`)}}function Re(t="",e,n=4){const a=Pe(n,"L");a.addData(t),a.make(),e.innerHTML=a.createImgTag(2,2),e.firstChild.style.borderRadius="8px"}function De(t){if(!t.startsWith("xpub"))return!1;try{return 78===x.decode(t.slice(4)).length}catch(t){return!1}}function ke(t){const e=document.createElement("div");return e.innerText=t,e.innerHTML}function Me(t,e=""){if("number"==typeof t&&(t=t.toString()),!t.includes("."))return t;const n=t.split("."),a=e?"font-size: "+e:"";return`${n[0]}<span style="opacity: 0.55; ${a}">.${n[1]}</span>`}function Ue(t,e){try{return null===t||null===e?t===e:typeof t==typeof e&&("object"!=typeof t||Object.getPrototypeOf(t)===Object.getPrototypeOf(e))}catch(t){return!1}}function Be(t){return null==t||""===t||Array.isArray(t)&&0===t.length||"object"==typeof t&&0===Object.keys(t).length}function He({pkBytes:t,publicKey:e,output:n="ENCODED"}){if(!t&&!e)return null;const s="UNCOMPRESSED_HEX"!==n;let d=e?o(e):c.$3(t,s);if("UNCOMPRESSED_HEX"===n){if(65!==d.length)throw new Error("Can't uncompress an already compressed key");return r(d)}if(65===d.length&&(d=function(t){if(65!=t.length)throw new Error("Attempting to compress an invalid uncompressed key");const e=t.slice(1,33);return[t.slice(33)[31]%2==0?2:3,...e]}(d)),33!=d.length)throw new Error("Invalid public key");if("COMPRESSED_HEX"===n)return r(d);const u=(0,a.J)(new Uint8Array(d)),h=(0,l.b)(u),y=new Uint8Array(21);y[0]=p.current.PUBKEY_ADDRESS,Ie(y,h,1);const m=i(y).slice(0,4),g=new Uint8Array(25);return Ie(g,y,0),Ie(g,m,21),x.encode(g)}function Ke(t,e=!1){return function(t="",e=!1,n=!1){const a=x.decode(t);if(!n){if(38!==a.byteLength)throw Error("Private key length ("+a.byteLength+") is invalid, should be 38!");if(a[0]!==p.current.SECRET_KEY){const t=Object.keys(p).filter((t=>"current"!==t)).map((t=>p[t])).find((t=>t.SECRET_KEY===a[0]));throw Error(t?"This private key is for "+(t.isTestnet?"Testnet":"Mainnet")+", wrong network!":"This private key belongs to another coin, or is corrupted.")}const t=i(a.slice(0,34)),e=a.slice(a.byteLength-4),n=t.slice(0,4);if(e.join("")!==n.join(""))throw Error("Private key checksum is invalid, key may be modified, mis-typed, or corrupt.")}return!e||Uint8Array.from(a.slice(1,33))}(t,!0,e)}onmessage=function(t){for(;;){const t={};t.priv=xe(),t.pub=He({pkBytes:t.priv}),postMessage(t)}}}},o={};function r(t){var e=o[t];if(void 0!==e)return e.exports;var n=o[t]={id:t,loaded:!1,exports:{}};return s[t].call(n.exports,n,n.exports,r),n.loaded=!0,n.exports}r.m=s,r.x=()=>{var t=r.O(void 0,[621,818],(()=>r(57119)));return r.O(t)},t=[],r.O=(e,n,a,s)=>{if(!n){var o=1/0;for(d=0;d<t.length;d++){for(var[n,a,s]=t[d],i=!0,c=0;c<n.length;c++)(!1&s||o>=s)&&Object.keys(r.O).every((t=>r.O[t](n[c])))?n.splice(c--,1):(i=!1,s<o&&(o=s));if(i){t.splice(d--,1);var l=a();void 0!==l&&(e=l)}}return e}s=s||0;for(var d=t.length;d>0&&t[d-1][2]>s;d--)t[d]=t[d-1];t[d]=[n,a,s]},r.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return r.d(e,{a:e}),e},n=Object.getPrototypeOf?t=>Object.getPrototypeOf(t):t=>t.__proto__,r.t=function(t,a){if(1&a&&(t=this(t)),8&a)return t;if("object"==typeof t&&t){if(4&a&&t.__esModule)return t;if(16&a&&"function"==typeof t.then)return t}var s=Object.create(null);r.r(s);var o={};e=e||[null,n({}),n([]),n(n)];for(var i=2&a&&t;"object"==typeof i&&!~e.indexOf(i);i=n(i))Object.getOwnPropertyNames(i).forEach((e=>o[e]=()=>t[e]));return o.default=()=>t,r.d(s,o),s},r.d=(t,e)=>{for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},r.f={},r.e=t=>Promise.all(Object.keys(r.f).reduce(((e,n)=>(r.f[n](t,e),e)),[])),r.u=t=>"./"+t+".mpw.js",r.miniCssF=t=>{},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.nmd=t=>(t.paths=[],t.children||(t.children=[]),t),(()=>{var t;r.g.importScripts&&(t=r.g.location+"");var e=r.g.document;if(!t&&e&&(e.currentScript&&(t=e.currentScript.src),!t)){var n=e.getElementsByTagName("script");n.length&&(t=n[n.length-1].src)}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),r.p=t})(),(()=>{r.b=self.location+"";var t={326:1};r.f.i=(e,n)=>{t[e]||importScripts(r.p+r.u(e))};var e=self.webpackChunkMPW=self.webpackChunkMPW||[],n=e.push.bind(e);e.push=e=>{var[a,s,o]=e;for(var i in s)r.o(s,i)&&(r.m[i]=s[i]);for(o&&o(r);a.length;)t[a.pop()]=1;n(e)}})(),a=r.x,r.x=()=>Promise.all([r.e(621),r.e(818)]).then(a);var i=r.x();MPW=i})();
//# sourceMappingURL=326.mpw.js.map