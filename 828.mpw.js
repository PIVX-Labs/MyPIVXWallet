var MPW;(()=>{var t,e,n,r,a={91620:(t,e,n)=>{"use strict";var r=n(48764),a=n(17748);function o(t){return r.Buffer.from(t).toString("hex")}var s=n(27760),i=n(72697);n(2153);const c=10**8,l={current:null,main:{name:"mainnet",collateralInSats:1e12,isTestnet:!1,TICKER:"PIV",PUBKEY_PREFIX:["D"],STAKING_PREFIX:"S",PUBKEY_ADDRESS:30,SECRET_KEY:212,BIP44_TYPE:119,BIP44_TYPE_LEDGER:77,PROTOCOL_VERSION:70926,MASTERNODE_PORT:51472,Explorers:[{name:"rockdev",url:"https://explorer.rockdev.org"},{name:"zkBitcoin",url:"https://zkbitcoin.com"},{name:"Duddino",url:"https://explorer.duddino.com"}],Nodes:[{name:"Duddino",url:"https://rpc.duddino.com/mainnet"}],Consensus:{UPGRADE_V6_0:void 0},budgetCycleBlocks:43200,proposalFee:5e9,maxPaymentCycles:6,maxPayment:432e11},testnet:{name:"testnet",collateralInSats:1e12,isTestnet:!0,TICKER:"tPIV",PUBKEY_PREFIX:["x","y"],STAKING_PREFIX:"W",PUBKEY_ADDRESS:139,SECRET_KEY:239,BIP44_TYPE:1,BIP44_TYPE_LEDGER:1,PROTOCOL_VERSION:70926,MASTERNODE_PORT:51474,Explorers:[{name:"rockdev",url:"https://testnet.rockdev.org"}],Nodes:[{name:"Duddino",url:"https://rpc.duddino.com/testnet"}],Consensus:{UPGRADE_V6_0:void 0},budgetCycleBlocks:144,proposalFee:5e9,maxPaymentCycles:20,maxPayment:144e9}};l.current=l.main,n(26269);class u{cData={};strName="";strEndpoint="";async ensureCacheExists(){this.cData&&Object.keys(this.cData).length||await this.fetch()}async fetch(){return this.cData=await(await fetch(this.strEndpoint)).json()}}let d="usd",p=new class extends u{constructor(){super(),this.strName="CoinGecko",this.strEndpoint="https://api.coingecko.com/api/v3/coins/pivx?localization=false&tickers=false&market_data=true&community_data=false&developer_data=false&sparkline=false"}async getPrice(t){return await this.ensureCacheExists(),this.cData.market_data.current_price[t]}async getCurrencies(){return await this.ensureCacheExists(),Object.keys(this.cData.market_data.current_price)}},h=(l.current.Explorers[0],l.current.Nodes[0],2),E={hit:"A ping indicating an app load, no unique data is sent.",time_to_sync:"The time in seconds it took for MPW to last synchronise.",transaction:"A ping indicating a Tx, no unique data is sent, but may be inferred from on-chain time."};Object.keys(E);n(91555);Object.freeze({0:0,FALSE:0,PUSHDATA1:76,PUSHDATA2:77,PUSHDATA4:78,"1NEGATE":79,RESERVED:80,1:81,TRUE:81,2:82,3:83,4:84,5:85,6:86,7:87,8:88,9:89,10:90,11:91,12:92,13:93,14:94,15:95,16:96,NOP:97,VER:98,IF:99,NOTIF:100,VERIF:101,VERNOTIF:102,ELSE:103,ENDIF:104,VERIFY:105,RETURN:106,TOALTSTACK:107,FROMALTSTACK:108,"2DROP":109,"2DUP":110,"3DUP":111,"2OVER":112,"2ROT":113,"2SWAP":114,IFDUP:115,DEPTH:116,DROP:117,DUP:118,NIP:119,OVER:120,PICK:121,ROLL:122,ROT:123,SWAP:124,TUCK:125,CAT:126,SUBSTR:127,LEFT:128,RIGHT:129,SIZE:130,INVERT:131,AND:132,OR:133,XOR:134,EQUAL:135,EQUALVERIFY:136,RESERVED1:137,RESERVED2:138,"1ADD":139,"1SUB":140,"2MUL":141,"2DIV":142,NEGATE:143,ABS:144,NOT:145,"0NOTEQUAL":146,ADD:147,SUB:148,MUL:149,DIV:150,MOD:151,LSHIFT:152,RSHIFT:153,BOOLAND:154,BOOLOR:155,NUMEQUAL:156,NUMEQUALVERIFY:157,NUMNOTEQUAL:158,LESSTHAN:159,GREATERTHAN:160,LESSTHANOREQUAL:161,GREATERTHANOREQUAL:162,MIN:163,MAX:164,WITHIN:165,RIPEMD160:166,SHA1:167,SHA256:168,HASH160:169,HASH256:170,CODESEPARATOR:171,CHECKSIG:172,CHECKSIGVERIFY:173,CHECKMULTISIG:174,CHECKMULTISIGVERIFY:175,NOP1:176,NOP2:177,CHECKLOCKTIMEVERIFY:177,NOP3:178,NOP4:179,NOP5:180,NOP6:181,NOP7:182,NOP8:183,NOP9:184,NOP10:185,ZEROCOINMINT:193,ZEROCOINSPEND:194,ZEROCOINPUBLICSPEND:195,CHECKCOLDSTAKEVERIFY_LOF:209,CHECKCOLDSTAKEVERIFY:210,INVALIDOPCODE:255});var m=n(77191),T=n.n(m);n(60743),n(25108),n(3006),n(51409);n(25108),n(19755),n(25108);class O{static version=null;#t;constructor({db:t}){this.#t=t}close(){this.#t.close(),this.#t=null}async addMasternode(t,e){const n=this.#t.transaction("masternodes","readwrite").objectStore("masternodes");await n.put(t,"masternode")}async removeMasternode(t){const e=this.#t.transaction("masternodes","readwrite").objectStore("masternodes");await e.delete("masternode")}async addPromo(t){const e=this.#t.transaction("promos","readwrite").objectStore("promos");await e.put(t,t.code)}async removePromo(t){const e=this.#t.transaction("promos","readwrite").objectStore("promos");await e.delete(t)}async addAccount({publicKey:t,encWif:e,localProposals:n=[],contacts:r=[],name:a=""}){const o=await this.getAccount(),s={publicKey:t,encWif:e,localProposals:n,contacts:r,name:a},i=this.#t.transaction("accounts","readwrite").objectStore("accounts");await i.put({...o,...s},"account")}async removeAccount({publicKey:t}){const e=this.#t.transaction("accounts","readwrite").objectStore("accounts");await e.delete("account")}async getAccount(){const t=this.#t.transaction("accounts","readonly").objectStore("accounts");return await t.get("account")}async getMasternode(t){const e=this.#t.transaction("masternodes","readonly").objectStore("masternodes");return new Masternode(await e.get("masternode"))}async getAllPromos(){const t=this.#t.transaction("promos","readonly").objectStore("promos");return(await t.getAll()).map((t=>new PromoWallet(t)))}async getSettings(){const t=this.#t.transaction("settings","readonly").objectStore("settings");return new Settings(await t.get("settings"))}async setSettings(t){const e=await this.getSettings(),n=this.#t.transaction("settings","readwrite").objectStore("settings");await n.put({...e,...t},"settings")}async#e(){if(0===localStorage.length)return;const t=new Settings({analytics:localStorage.analytics,explorer:localStorage.explorer,node:localStorage.node,translation:localStorage.translation,displayCurrency:localStorage.displayCurrency});if(await this.setSettings(t),localStorage.masternode)try{const t=JSON.parse(localStorage.masternode);await this.addMasternode(t)}catch(t){database_console.error(t),createAlert("warning",ALERTS.MIGRATION_MASTERNODE_FAILURE)}if(localStorage.encwif||localStorage.publicKey)try{const t=JSON.parse(localStorage.localProposals||"[]");await this.addAccount({publicKey:localStorage.publicKey,encWif:localStorage.encwif,localProposals:t})}catch(t){database_console.error(t),createAlert("warning",ALERTS.MIGRATION_ACCOUNT_FAILURE),localStorage.encwif&&await confirmPopup({title:translation.MIGRATION_ACCOUNT_FAILURE_TITLE,html:`${translation.MIGRATION_ACCOUNT_FAILURE_HTML} <code id="exportPrivateKeyText">${sanitizeHTML(localStorage.encwif)} </code>`})}}static async create(t){const e=new O({db:null}),n=await openDB(`MPW-${t}`,2,{upgrade:(t,e)=>{database_console.log("DB: Upgrading from "+e+" to 2"),0==e&&(t.createObjectStore("masternodes"),t.createObjectStore("accounts"),t.createObjectStore("settings")),e<=1&&t.createObjectStore("promos")},blocking:()=>{e.close(),alert("New update received!"),window.location.reload()}});return e.#t=n,e}static#n=new Map;static async getInstance(){const t=cChainParams.current.name,e=this.#n.get(t);return e&&e.#t||this.#n.set(t,await O.create(t)),this.#n.get(t)}}n(25108);let g={};function f(t=32){return crypto.getRandomValues(new Uint8Array(t))}function y(t,e,n){const r=t.length;if(r-n-e.length<0){const t="CRITICAL: Overflow detected ("+(r-n-e.length)+"), possible state corruption, backup and refresh advised.";throw S("warning",t,5e3),Error(t)}let a=0;for(;n<r;)t[n++]=e[a++]}function S(t,e,n=[],r=0){const a=document.createElement("div");a.classList.add("notifyWrapper"),a.classList.add(t),setTimeout((()=>{a.style.opacity="1",a.style.zIndex="999999",a.classList.add("bounce-ani"),a.classList.add("bounce")}),100),"number"==typeof n&&(r=n,n=[]);const o=function(t,e){return e.forEach((e=>{t=t.replaceAll("{"+Object.keys(e)[0]+"}",Object.values(e)[0])})),t}(e,n);let s;switch(t){case"warning":s="fa-exclamation";break;case"info":s="fa-info";break;default:s="fa-check"}a.innerHTML=`\n    <div class="notifyIcon notify-${t}">\n        <i class="fas ${s} fa-xl"></i>\n    </div>\n    <div class="notifyText">\n        ${o}\n    </div>`,a.destroy=()=>{clearTimeout(a.timer),a.style.opacity="0",setTimeout((()=>{a.remove()}),600)},a.addEventListener("click",a.destroy),r>0&&(a.timer=setTimeout(a.destroy,r)),w.domAlertPos.appendChild(a)}function v(t,e=""){if("number"==typeof t&&(t=t.toString()),!t.includes("."))return t;const n=t.split("."),r=e?"font-size: "+e:"";return`${n[0]}<span style="opacity: 0.55; ${r}">.${n[1]}</span>`}n(96192),n(27715),n(19755);const R=new(n(17187).EventEmitter);n(25108);var b=n(25108);class P{constructor({id:t,path:e,sats:n,script:r,vout:a,height:o,status:s,isDelegate:i=!1,isReward:c=!1}={}){this.id=t,this.path=e,this.sats=n,this.script=r,this.vout=a,this.height=o,this.status=s,this.isDelegate=i,this.isReward=c}equalsUTXO(t){return this.id===t.id&&this.vout===t.vout&&this.status===t.status}}class A{constructor(){this.UTXOs=[],this.subscribeToNetwork()}static CONFIRMED=0;static REMOVED=1;static PENDING=2;async removeWithDelay(t,e){var n;await(n=60*t*1e3,new Promise(((t,e)=>setTimeout(t,n)))),this.removeUTXO(e)}isAlreadyStored({id:t,vout:e,status:n}){return this.UTXOs.some((r=>r.id===t&&r.vout===e&&(!n||r.status===n)))}getUTXOsByState(t){return this.UTXOs.filter((e=>e.status===t))}removeFromState(t,e){const n=this.getUTXOsByState(e);for(const e of n)if(e.id===t.id&&e.vout===t.vout){this.removeUTXO(e);break}}addUTXO({id:t,path:e,sats:n,script:r,vout:a,height:o,status:s,isDelegate:i,isReward:c}){const l=new P({id:t,path:e,sats:n,script:r,vout:a,height:o,status:s,isDelegate:i,isReward:c});this.isAlreadyStored({id:t,vout:a})?this.updateUTXO({id:t,vout:a}):this.UTXOs.push(l),D(!0),N(!0)}updateUTXO({id:t,vout:e}){const n=this.UTXOs.find((n=>n.id===t&&n.vout==e));n.status===A.PENDING&&(n.status=A.CONFIRMED),D(!0),N(!0)}removeUTXO(t){this.UTXOs=this.UTXOs.filter((e=>!e.equalsUTXO(t)))}autoRemoveUTXO({id:t,vout:e}){for(const n of this.UTXOs)if(n.id===t&&n.vout===e)return n.status=A.REMOVED,void this.removeWithDelay(12,n);b.error("Mempool: Failed to find UTXO "+t+" ("+e+") for auto-removal!")}autoRemoveUTXOs(t){for(const e of t)for(const t of this.UTXOs)if(t.equalsUTXO(e)){t.status=A.REMOVED,this.removeWithDelay(12,t);break}}getConfirmed(){return this.getUTXOsByState(A.CONFIRMED)}getStandardUTXOs(){return this.UTXOs.filter((t=>t.status!==A.REMOVED&&!t.isDelegate))}getDelegatedUTXOs(){return this.UTXOs.filter((t=>t.status!==A.REMOVED&&t.isDelegate))}getBalance(){return this.getStandardUTXOs().filter((t=>!function(t,e){if(e?.collateralTxId){const{collateralTxId:n,outidx:r}=e;return n===t.id&&t.vout===r}return!1}(t))).reduce(((t,e)=>t+e.sats),0)}static isValidUTXO(t){return!t.isReward||null.cachedBlockCount-t.height>100}getDelegatedBalance(){return this.getDelegatedUTXOs().reduce(((t,e)=>t+e.sats),0)}subscribeToNetwork(){R.on("utxo",(async t=>{for(const e of t)this.isAlreadyStored({id:e.txid,vout:e.vout})?this.updateUTXO({id:e.txid,vout:e.vout}):this.addUTXO(await null.getUTXOFullInfo(e))}))}}n(9424),n(25108),new TextEncoder,new TextDecoder,n(19755),n(25108);let w={};const I=new A;function U(){w.domGuiBalanceValueCurrency.innerText=d.toUpperCase(),w.domGuiStakingValueCurrency.innerText=d.toUpperCase(),w.domSendAmountValueCurrency.innerText=d.toUpperCase(),w.domSendAmountCoinsTicker.innerText=l.current.TICKER,w.domStakeAmountValueCurrency.innerText=d.toUpperCase(),w.domStakeAmountCoinsTicker.innerText=l.current.TICKER,w.domStakeAmountValueCurrency.innerText=d.toUpperCase(),w.domUnstakeAmountCoinsTicker.innerText=l.current.TICKER}function C(t,e=!1){p.getPrice(d).then((n=>{const r=(e?N():D())/c*n,{nValue:a,cLocale:o}=function(t){let e=t;const n=Intl.supportedValuesOf("currency").includes(d.toUpperCase())?{style:"currency",currency:d,currencyDisplay:"narrowSymbol"}:{maximumFractionDigits:8,minimumFractionDigits:8};return{nValue:e,cLocale:n}}(r);t.innerText=a.toLocaleString("en-gb",o)}))}function D(t=!1){const e=I.getBalance();if(t){const t=(e/c).toFixed(h),n=t.length;w.domGuiBalance.innerHTML=v(t,n>=10?"17px":"25px"),w.domAvailToDelegate.innerHTML=v(t)+" "+l.current.TICKER,U(),C(w.domGuiBalanceValue)}return e}function N(t=!1){const e=I.getDelegatedBalance();if(t){const t=(e/c).toFixed(h),n=t.length;w.domGuiBalanceStaking.innerHTML=v(t,n>=10?"17px":"25px"),w.domAvailToUndelegate.innerHTML=v(t)+" "+l.current.TICKER,U(),C(w.domGuiStakingValue,!0)}return e}function L(t){const e=`${g.unhandledException} <br> ${function(t){const e=document.createElement("div");return e.innerText=t,e.innerHTML}(t.message||t.reason)}`;try{S("warning",e)}catch(t){alert(e)}}l.current.isTestnet;try{window.addEventListener("error",L),window.addEventListener("unhandledrejection",L)}catch(t){}function x({pkBytes:t,publicKey:e,output:n="ENCODED"}){if(!t&&!e)return null;const c="UNCOMPRESSED_HEX"!==n;let u=e?(d=e,r.Buffer.from(d,"hex")):s.$3(t,c);var d;if("UNCOMPRESSED_HEX"===n){if(65!==u.length)throw new Error("Can't uncompress an already compressed key");return o(u)}if(65===u.length&&(u=function(t){if(65!=t.length)throw new Error("Attempting to compress an invalid uncompressed key");const e=t.slice(1,33);return[t.slice(33)[31]%2==0?2:3,...e]}(u)),33!=u.length)throw new Error("Invalid public key");if("COMPRESSED_HEX"===n)return o(u);const p=(0,a.J)(new Uint8Array(u)),h=(0,i.b)(p),E=new Uint8Array(21);var m;E[0]=l.current.PUBKEY_ADDRESS,y(E,h,1);const O=(m=E,(0,a.J)((0,a.J)(new Uint8Array(m)))).slice(0,4),g=new Uint8Array(25);return y(g,E,0),y(g,O,21),T().encode(g)}n(49840),n(2099),n(27578),n(34611),n(19755),n(25108),new Map([[25870,"Open the PIVX app on your device"],[25873,"Open the PIVX app on your device"],[57408,"Navigate to the PIVX app on your device"],[27157,"Wrong app! Open the PIVX app on your device"],[27266,"Wrong app! Open the PIVX app on your device"],[27904,"Wrong app! Open the PIVX app on your device"],[27010,"Unlock your Ledger, then try again!"],[27404,"Unlock your Ledger, then try again!"]]),onmessage=function(t){for(;;){const t={};t.priv=f(),t.pub=x({pkBytes:t.priv}),postMessage(t)}}},95856:()=>{},48777:()=>{},46601:()=>{},89214:()=>{},52361:()=>{},94616:()=>{}},o={};function s(t){var e=o[t];if(void 0!==e)return e.exports;var n=o[t]={id:t,loaded:!1,exports:{}};return a[t].call(n.exports,n,n.exports,s),n.loaded=!0,n.exports}s.m=a,s.x=()=>{var t=s.O(void 0,[621,369],(()=>s(91620)));return s.O(t)},t=[],s.O=(e,n,r,a)=>{if(!n){var o=1/0;for(u=0;u<t.length;u++){for(var[n,r,a]=t[u],i=!0,c=0;c<n.length;c++)(!1&a||o>=a)&&Object.keys(s.O).every((t=>s.O[t](n[c])))?n.splice(c--,1):(i=!1,a<o&&(o=a));if(i){t.splice(u--,1);var l=r();void 0!==l&&(e=l)}}return e}a=a||0;for(var u=t.length;u>0&&t[u-1][2]>a;u--)t[u]=t[u-1];t[u]=[n,r,a]},s.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return s.d(e,{a:e}),e},n=Object.getPrototypeOf?t=>Object.getPrototypeOf(t):t=>t.__proto__,s.t=function(t,r){if(1&r&&(t=this(t)),8&r)return t;if("object"==typeof t&&t){if(4&r&&t.__esModule)return t;if(16&r&&"function"==typeof t.then)return t}var a=Object.create(null);s.r(a);var o={};e=e||[null,n({}),n([]),n(n)];for(var i=2&r&&t;"object"==typeof i&&!~e.indexOf(i);i=n(i))Object.getOwnPropertyNames(i).forEach((e=>o[e]=()=>t[e]));return o.default=()=>t,s.d(a,o),a},s.d=(t,e)=>{for(var n in e)s.o(e,n)&&!s.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},s.f={},s.e=t=>Promise.all(Object.keys(s.f).reduce(((e,n)=>(s.f[n](t,e),e)),[])),s.u=t=>"./"+t+".mpw.js",s.miniCssF=t=>{},s.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),s.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),s.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.nmd=t=>(t.paths=[],t.children||(t.children=[]),t),(()=>{var t;s.g.importScripts&&(t=s.g.location+"");var e=s.g.document;if(!t&&e&&(e.currentScript&&(t=e.currentScript.src),!t)){var n=e.getElementsByTagName("script");n.length&&(t=n[n.length-1].src)}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),s.p=t})(),(()=>{s.b=self.location+"";var t={828:1};s.f.i=(e,n)=>{t[e]||importScripts(s.p+s.u(e))};var e=self.webpackChunkMPW=self.webpackChunkMPW||[],n=e.push.bind(e);e.push=e=>{var[r,a,o]=e;for(var i in a)s.o(a,i)&&(s.m[i]=a[i]);for(o&&o(s);r.length;)t[r.pop()]=1;n(e)}})(),r=s.x,s.x=()=>Promise.all([s.e(621),s.e(369)]).then(r);var i=s.x();MPW=i})();
//# sourceMappingURL=828.mpw.js.map